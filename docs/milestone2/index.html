<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.56">
<title data-react-helmet="true">Milestone 2 🛠️ | BloodConnect</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Milestone 2 🛠️ | BloodConnect"><meta data-react-helmet="true" name="description" content="Proposed level of achievement: Artemis."><meta data-react-helmet="true" property="og:description" content="Proposed level of achievement: Artemis."><meta data-react-helmet="true" property="og:url" content="https://bloodwork-nus.github.io/bloodconnect/docs/milestone2"><link data-react-helmet="true" rel="shortcut icon" href="/bloodconnect/img/logo.png"><link data-react-helmet="true" rel="canonical" href="https://bloodwork-nus.github.io/bloodconnect/docs/milestone2"><link rel="stylesheet" href="/bloodconnect/styles.4cab5d76.css">
<link rel="preload" href="/bloodconnect/styles.6448a0d5.js" as="script">
<link rel="preload" href="/bloodconnect/runtime~main.5ea7f81b.js" as="script">
<link rel="preload" href="/bloodconnect/main.304eb369.js" as="script">
<link rel="preload" href="/bloodconnect/1.0183cd1f.js" as="script">
<link rel="preload" href="/bloodconnect/2.805cd87e.js" as="script">
<link rel="preload" href="/bloodconnect/3.70b94179.js" as="script">
<link rel="preload" href="/bloodconnect/1be78505.7d2ec039.js" as="script">
<link rel="preload" href="/bloodconnect/37.6fd65a40.js" as="script">
<link rel="preload" href="/bloodconnect/ce2a1ceb.ddcea579.js" as="script">
<link rel="preload" href="/bloodconnect/08301e33.502c9a6e.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/bloodconnect/"><img class="navbar__logo" src="/bloodconnect/img/logo.png" alt="BloodConnect Logo"><strong class="navbar__title">BloodConnect</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/bloodconnect/docs/">Docs</a><a class="navbar__item navbar__link" href="/bloodconnect/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/bloodwork-nus/bloodconnect-api" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">API</a><a href="https://github.com/bloodwork-nus/bloodconnect" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/bloodconnect/"><img class="navbar__logo" src="/bloodconnect/img/logo.png" alt="BloodConnect Logo"><strong class="navbar__title">BloodConnect</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/bloodconnect/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/bloodconnect/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/bloodwork-nus/bloodconnect-api" target="_blank" rel="noopener noreferrer" class="menu__link">API</a></li><li class="menu__list-item"><a href="https://github.com/bloodwork-nus/bloodconnect" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Preliminary</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/bloodconnect/docs/about">Who We Are</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Category 1</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/bloodconnect/docs/doc1">Style Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/bloodconnect/docs/doc2">Document Number 2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/bloodconnect/docs/doc3">This is Document Number 3</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Features</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/bloodconnect/docs/mdx">Powered by MDX</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Milestones</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/bloodconnect/docs/milestone1">Milestone 1</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/bloodconnect/docs/milestone2">Milestone 2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/bloodconnect/docs/milestone3">Milestone 3</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Milestone 2 🛠️</h1></header><div class="markdown"><p>Proposed level of achievement: <strong>Artemis</strong>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="whats-new"></a>What&#x27;s new?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#whats-new" title="Direct link to heading">#</a></h2><p>Milestone 2 brought about many fundamental features and enables the core functionality of BloodConnect, i.e. to connect donors and donees. There
are hundreds of bugfixes and performance improvements too, but here are some of the big features in Milestone 2.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="authorisation-"></a>Authorisation 🔑<a aria-hidden="true" tabindex="-1" class="hash-link" href="#authorisation-" title="Direct link to heading">#</a></h3><p>Users can now create an account with their full name and email address. Afterwards, they can log in to browse, create, and respond to requests.
Upon creation of new accounts, verification emails will be sent and users will be required to verify their email address before making a request.
Currently, there are partial Guest account and Sign in with Google capabilities, but this feature can simply be integrated in Milestone 3.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="maps-️"></a>Maps 🗺️<a aria-hidden="true" tabindex="-1" class="hash-link" href="#maps-️" title="Direct link to heading">#</a></h3><p>The map view powered by Google Maps and Apple Maps for Android and iOS has been fully integrated. In the Explore screen, requests all over the world
will be marked with a red pin 📍. Users can navigate to their current location (with a sleek animation 😎) and tapping on the red pins will open up
a card with the request details containing location name and address, blood type, and a brief description if specified, as well as a Donate button.</p><p>Similar map view has also been integrated in the create-a-new-request screen. When creating a new request, users can search 🔍 for a location name
and address via a search box powered by the <a href="https://developers.google.com/places/web-service/intro" target="_blank" rel="noopener noreferrer">Google Maps Places API</a>. The choice for this
API is due to the vast database of places served by the Google Maps Platform. Currently, the map view is static and serves as a second confirmation
if the place selected from the search box is accurate. We aim to allow users to pinpoint location by dragging the map view, as seen in Gojek, Uber,
and Grab apps. This will require the <a href="https://developers.google.com/maps/documentation/geocoding/start" target="_blank" rel="noopener noreferrer">Google Maps Geocoding API</a>. However, this
API (and others too we believe) cannot retrieve a location&#x27;s name—just their address. We may or may not bring this feature in Milestone 3.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="requests-and-donations-🩸"></a>Requests and donations 🩸<a aria-hidden="true" tabindex="-1" class="hash-link" href="#requests-and-donations-🩸" title="Direct link to heading">#</a></h3><p>Database 🗄️ is the main gist of BloodConnect. Users can now create a request, and the request will be updated in real-time ⏱️ in every BloodConnect
instances. Users can also manage the list of requests, cancel, and delete them through the Manage requests page. Potential donors can respond to
requests by tapping 👆 Donate and providing their blood type, contact name and number, and the potential donors will be updated real-time in the
Manage requests page. The requester can sort through the list of potential donors and contact them. After making an appointment and completing
the transfusion, the requester can mark a request as completed ✅ with a donor.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="push-notifications-"></a>Push notifications 🔔<a aria-hidden="true" tabindex="-1" class="hash-link" href="#push-notifications-" title="Direct link to heading">#</a></h3><p>For every new potential donor, a notification will be pushed to the requester to notify them. This push notification is powered by
<a href="https://firebase.google.com/docs/cloud-messaging" target="_blank" rel="noopener noreferrer">Firebase Cloud Messaging</a> on Android and
<a href="https://developer.apple.com/notifications/" target="_blank" rel="noopener noreferrer">Apple Push Notification service</a> on iOS. The database listeners are implemented via the serverless
<a href="https://firebase.google.com/docs/functions" target="_blank" rel="noopener noreferrer">Cloud Functions for Firebase</a>. The push notification is working, however, cannot be demonstrated
as the Spark (free) subscription of Firebase does not permit external HTTP requests. Otherwise, the author has confirmed that the notifications
will be pushed.</p><p>We aim to push notifications when a request has been made to nearby users, which is one of BloodConnect&#x27;s main features. However, we foresee not
only an issue with our free Firebase subscription, but also privacy issues 🔒 regarding the scanning and obtaining of locations of users from our
database. We will continue to assess the mechanisms and hope to bring this feature in Milestone 3.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="general-improvements-"></a>General improvements 📈<a aria-hidden="true" tabindex="-1" class="hash-link" href="#general-improvements-" title="Direct link to heading">#</a></h3><p>By manipulating the animation frame in React Native, BloodConnect&#x27;s UI components are now more responsive 🏃‍♂️💨. Components have been restructured
and simplified, without sacrificing their aesthetics, which reduces total render time. With the recent release of Expo SDK 38, we will further
restructure BloodConnect&#x27;s homebrew UI components and refactor asynchronous function calls to not only improve overall performance, but also reduce
the final distributable app packages&#x27; size 📦.</p><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</h5></div><div class="admonition-content"><p>We are well aware of the recent <a href="https://nvd.nist.gov/vuln/detail/CVE-2020-8149" target="_blank" rel="noopener noreferrer">CVE-2020-8149</a> vulnerability involving <code>logkitty</code> version &lt; 0.7.1
which allows arbitrary shell commands execution. BloodConnect is susceptible to this vulnerability. Fret not, we have tested an experimental branch
with updated packages that will resolve this vulnerability. It will be deployed by Milestone 3 after upgrading our code base.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="testing"></a>Testing<a aria-hidden="true" tabindex="-1" class="hash-link" href="#testing" title="Direct link to heading">#</a></h2><p>As Milestone 2 is a prototyping phase, unit tests have not yet been integrated in our code base (please ignore the Failed CircleCI status image).
However, we have performed manual system tests with regards to the several features we have implemented.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="authorisation"></a>Authorisation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#authorisation" title="Direct link to heading">#</a></h3><ul><li><p><strong>Creating an account</strong>. We created a user account with a full name, email address, and password. As expected, the user was logged in and
a verification email was sent. There was an issue whereby the authentication state was mutated and caused mix-ups and verification emails be sent
to other users, and replaces the previous users&#x27; details.
<a href="https://github.com/bloodwork-nus/bloodconnect/commit/1358d7b6b21740986a3a78524ff9e9c24638abfc" target="_blank" rel="noopener noreferrer">This issue has been fixed</a>.</p></li><li><p><strong>Logging in</strong>. We logged in with correct credentials, and the login was successful and the user&#x27;s requests and details were correctly retrieved.
Logging in with wrong credentials will lead to an error message, as expected.</p></li><li><p><strong>Logging out</strong>. Upon logging out, we tried accessing screens which requires an authorised state, and the request failed, as expected. However,
it was known that when logging in with a user (e.g. Alice), logging out, and logging in with another user (e.g. Bob), some screens were not
re-rendered, leading to the old user&#x27;s (Alice&#x27;s) data being displayed. This issue can simply be resolved by ensuring proper purging after a logout
and re-rendering screens after a successful login. We will create a service to perform these tasks, and deliver it in Milestone 3.</p></li><li><p><strong>Creating an account with used email address</strong> led to an error. Passwords must also be at least 6 characters, as expected.</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="maps"></a>Maps<a aria-hidden="true" tabindex="-1" class="hash-link" href="#maps" title="Direct link to heading">#</a></h3><ul><li><p><strong>Navigating with multitouch</strong>. Pan and zooming gestures worked as expected on map views. Rotating the map view did not misalign the markers,
callouts, and user&#x27;s location.</p></li><li><p><strong>Tapping on request markers</strong> will lower down the bottom sheet and display a card containing the request&#x27;s details. Tapping anywhere outside
on the map view will dismiss the card. The bottom sheet should be on top of the request details card and thus, when swiped up, cover the card.
However, since the card uses elevation on Android for shadows, for some reasons it was brought to the front unexpectedly.
<a href="https://github.com/bloodwork-nus/bloodconnect/commit/4f6b05f09d9f0ecc47449a432fdaa21562baa8fd" target="_blank" rel="noopener noreferrer">This issue has been fixed</a>.</p></li><li><p><strong>Panning on map view</strong> will lower the bottom sheet for better viewing experience, and it worked as expected.</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="new-request-screen"></a>New request screen<a aria-hidden="true" tabindex="-1" class="hash-link" href="#new-request-screen" title="Direct link to heading">#</a></h3><ul><li><p><strong>Tapping on the + button</strong> opens the new request screen. However, there was a delay in opening the page, which is believed due to the structuring
of the three steps&#x27; pages loading at once. We will continue to refactor the component to reduce the delay.</p></li><li><p><strong>Choose a blood type modal</strong>. Tapping on the Choose button opens the bottom sheet modal with a list of blood types. Upon selecting a blood type,
the modal will be dismissed and the button&#x27;s label will be changed to the blood type and the text will be bolded. Interacting on the grey area
outside the modal, instead of allowing touches to pass through the form, dismisses the modal, as expected. However, since the displayed value
was also the <code>id</code> of the blood type sent to the database, when parsed back to the requests page, some blood type will overflow the text field
(e.g. <code>Others (specify in description)</code> or <code>Any blood groups</code> will appear as is on the square text field designed for blood types such as <code>AB+</code> or
<code>A-</code>). This can simply be fixed by abstracting these values to enumerated constants and translating them every time they are translated to the UI.</p></li><li><p><strong>Specifying the number of units</strong> with the numeric up-down works, but allows negative values and zero unit. This can simply be fixed by
locking the value.</p></li><li><p><strong>Contact number fields</strong>, although enables the phone pad keyboard, allows non-numeric characters to be typed. A user could be using an external
keyboard and typed non-numeric characters into it. This can be fixed by adding a validator in each key press.</p></li><li><p><strong>Description is capped to 95 characters</strong>. The characters counter worked as expected, and upon typing the 96th character, the text will be
blocked. However, it is possible for users to insert line breaks, i.e. <code>\n</code>. This issue was fixed
<a href="https://github.com/bloodwork-nus/bloodconnect/commit/c283fba6a076f6b4affd2ceab9bbd2c8d5bb5692" target="_blank" rel="noopener noreferrer">here</a> and
<a href="https://github.com/bloodwork-nus/bloodconnect/commit/5109cc7d010f26746e99fc0fa34ebbd3805a5889" target="_blank" rel="noopener noreferrer">here</a> by trimming the description
after confirmation. However, it is still possible for the user to put line breaks and end the description with a character, thus leading to an
overly large request details card in the Explore screen. This issue can be fixed by completely disabling the input of line breaks. We tried
copying a long text and pasting it to the text field, and it was truncated to 95 characters, as expected.</p></li><li><p><strong>Required fields</strong>, such as request type, blood type, contact name, and contact number must be filled before user is allowed to progress to
the next step. Users must also choose a location before allowed to access the last step of making a new request.</p></li><li><p><strong>Blood type was uppercased in review request screen</strong> due to the use of same fields for <code>id</code> and <code>label</code>, similar to blood types as
mentioned previously.</p></li><li><p><strong>Edit buttons</strong> tapped brings the user back to the screen containing controls to edit the respective variables, as expected. By exploiting
<a href="https://reactjs.org/docs/refs-and-the-dom.html">React Refs</a>, we could probably control the components such that they can be automatically focused
when users want to edit several variables (e.g. focusing the contact name text box if user wants to edit contact details) or highlighting
(in red) the required fields that the user forgot to fill.</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="manage-requests-screen"></a>Manage requests screen<a aria-hidden="true" tabindex="-1" class="hash-link" href="#manage-requests-screen" title="Direct link to heading">#</a></h3><ul><li><p><strong>Request controls</strong>. For all requests, users will be able to view the request location name and address, blood type, emergency badge if
applicable, and time of creation. The controls were displayed correctly.</p></li><li><p><strong>Open request controls</strong>. For open requests, users will be able to see number of potential donors, a View donors and Close request buttons.
Tapping on Close request will close the request and move the request down to Past requests.</p></li><li><p><strong>Past request controls</strong>. For completed requests, users will be able to see the final donor&#x27;s name and contact number and the time of completion
for reference. For both completed and cancelled requests, tapping on Delete request will remove the request from our database. Indeed, the request
object was deleted when tapped. However, we discovered that the donation object was not deleted, since they were on a different tree. Nevertheless,
we plan on abstracting the database mutators to the cloud functions, so this issue will be fixed.</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="ui-components"></a>UI components<a aria-hidden="true" tabindex="-1" class="hash-link" href="#ui-components" title="Direct link to heading">#</a></h3><ul><li><p><strong>Map overlay UI components should stay behind bottom sheet and bottom bar</strong>. User profile button, my location button, and request details
cards stayed behind when the bottom sheet was slide up. There was once when the user profile and location buttons suddenly float on top.
<a href="https://github.com/bloodwork-nus/bloodconnect/commit/e7b3016e5d9dca011836eda723659e41d920c08e" target="_blank" rel="noopener noreferrer">This issue has been fixed</a>.</p></li><li><p><strong>Tapping on a button multiple times</strong>. We improved our UI components&#x27; responsiveness by altering the animation frame. However, this leads to
buttons becoming active again before tasks were completed (some tasks are asynchronous). Therefore, if a user taps on a Submit button repeatedly,
the same request will be made multiple times to our database. This can be fixed by transferring user to a loading screen or disabling the button
until the process is completed.</p></li><li><p><strong>Tapping on bottom sheet <code>Touchable</code>s should invoke the event listener</strong>. Yeah, you think it&#x27;s trivial?
<a href="https://github.com/bloodwork-nus/bloodconnect/commit/f35e12002b37b66ed10b635018548662ce4d9678" target="_blank" rel="noopener noreferrer">I don&#x27;t think so</a>. Oh, and
<a href="https://github.com/bloodwork-nus/bloodconnect/commit/06d8b8baf94030b1a54f3c4c34b167e713d1b1a9" target="_blank" rel="noopener noreferrer">another one</a>. Since the bottom sheet is powered
by <code>react-native-gesture-handler</code>, the <code>Touchable</code>s used must also be imported from <code>react-native-gesture-handler</code> since the gesture and tap
controllers will overlap otherwise.</p></li><li><p><strong>Bottom sheet</strong>. Tapping on the right list icon on the bottom bar in the Explore screen expands the bottom sheet to show the list of requests.
If the user decides to just slide the bottom sheet up, then the focused button in the bottom bar will be shifted to Requests, as expected. When
the user slides the bottom sheet down, the focused button will be shifted to Explore. This behaviour, however, only worked once, and the Request
button did not get focused if the bottom sheet was slide up the second time. It is possible that this behaviour was due to the behaviour of the
bottom sheet, which uses <a href="https://docs.swmansion.com/react-native-gesture-handler/docs/getting-started.html"><code>react-native-gesture-handler</code></a> and
<a href="https://docs.swmansion.com/react-native-reanimated/" target="_blank" rel="noopener noreferrer"><code>react-native-reanimated</code></a>. For some reasons, the callback provided by the API did not
respond, or the component did not re-render. Nevertheless, this problem is not fixable (since it was from the API), and we will change the
Requests button to transfer user to the Manage requests screen, which is more useful.</p></li><li><p><strong>Requests show only open requests</strong>. We also noticed that the list of requests shown in the bottom sheet includes closed requests. This can
simply be fixed by adding a validator. Nevertheless, this issue will be fixed once we abstract the database queries to our cloud functions.</p></li><li><p><strong>Cancelling a new request screeen and navigating to other screens</strong> should not be an issue. We noticed that after cancelling from new request
screen and entering user profile screen, the back button would not transfer the user back and React complained with a warning that the screen
was unmounted. This was probably due to the <a href="https://reactnative.dev/docs/backhandler" target="_blank" rel="noopener noreferrer"><code>BackHandler</code></a> attached to
<a href="https://github.com/bloodwork-nus/bloodconnect/commit/6b65bdae4ad130a2535faa50dbad6a91d0f168d9" target="_blank" rel="noopener noreferrer"><code>NewRequestFormScreen</code></a>, which
was <em>not</em> detached when Cancel was tapped, since it triggered <a href="https://reactnavigation.org/docs/navigation-prop/" target="_blank" rel="noopener noreferrer"><code>navigation.goBack()</code></a> which did
not unmount the screen. No worries, we can fix this issue by using a different mechanism to go back to previous steps and cancel a new request
creation, or using React&#x27;s <a href="https://reactjs.org/docs/hooks-reference.html#usecallback"><code>useCallback</code></a> and
<a href="https://reactjs.org/docs/hooks-effect.html"><code>useEffect</code></a> to ensure the <code>BackHandler</code> is detached.</p></li><li><p><strong>Interacting with UI components when keyboard is open</strong>. This has always been a known issue with React Native. When the keyboard is open,
tapping on any <code>Touchable</code>s will dismiss the keyboard, but the event listener was not invoked. Therefore, users will have to double tap a Login
button when the keyboard is open after typing their credentials. This issue is fixable by setting the
<a href="https://reactnative.dev/docs/scrollview#keyboardshouldpersisttaps" target="_blank" rel="noopener noreferrer"><code>keyboardShouldPersistTaps</code></a> prop to <code>&quot;always&quot;</code>. However, this prop is only
usable in <code>ScrollView</code>s and <code>VirtualizedList</code>s. We will continue to investigate this problem.</p></li><li><p><strong>Padding objects when keyboard is open</strong>. When the keyboard is open, it may obstruct some components, even focused ones, such that the user
cannot view what they are typing. In Android, this has been a <a href="https://github.com/expo/expo/issues/1247" target="_blank" rel="noopener noreferrer">known issue with Expo</a> involving the
unconfigurable <code>windowSoftInputMode</code>. We have worked on a fix for this issue multiple times with
<a href="https://github.com/bloodwork-nus/bloodconnect/commit/34e9119f41e5bf262a47fa705410530097ebbd87#diff-5b71b62c5b31e4ee656234c53e295ae3" target="_blank" rel="noopener noreferrer">ScrollView and KeyboardAvoidingView</a>,
<a href="https://github.com/bloodwork-nus/bloodconnect/commit/3f590890e87ccdc9c25f10ece1fd58dab288bc29" target="_blank" rel="noopener noreferrer">using <code>minHeight</code></a>,
<a href="https://github.com/bloodwork-nus/bloodconnect/commit/c9caf7e123a6572b2165c328b48b3a02e019dcec#diff-2ac791c2ef19a29965750941c6d21355R106" target="_blank" rel="noopener noreferrer">here</a>,
and <a href="https://github.com/bloodwork-nus/bloodconnect/commit/550b1c4506f8f6a1fd226b157719bc6ea8db687a" target="_blank" rel="noopener noreferrer">here</a> with <code>KeyboardAvoidingView</code>s. In iOS,
the <code>KeyboardAvoidingView</code>&#x27;s behaviour is different, and the view only pads the screen when a component (e.g. text box) is tapped. We will have
to continue experimenting with manual padding behaviours to ensure fields are viewable when a user is changing its value.</p></li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>As of <a href="https://blog.expo.io/expo-sdk-38-is-now-available-ab6cd30ca2ee" target="_blank" rel="noopener noreferrer">Expo SDK 38 released 4 days ago</a>, <code>windowSoftInputMode</code> is finally
configurable, and this issue should be fixed on Android once we upgrade our code base to SDK 38. We will have to continue experimenting with iOS.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="known-issues"></a>Known issues<a aria-hidden="true" tabindex="-1" class="hash-link" href="#known-issues" title="Direct link to heading">#</a></h3><p>These are issues that are unfixable by the author and are manifestations of bugs in the frameworks used in this project. Trust me, I am so done
and fed up with these frameworks but I cannot run from it :)</p><ul><li><p><strong>Random Drawable error popping up</strong>. This issue was raised on June 29, 2020 and is suspected to be caused by a bug with <code>TextInput</code> components
in React Native. <a href="https://github.com/facebook/react-native/issues/17530" target="_blank" rel="noopener noreferrer">This issue has been opened since January 11, 2018</a>. This is the error
log thrown.  </p><blockquote><p>Attempt to invoke virtual method <code>&#x27;android.graphics.drawable.Drawable
android.graphics.drawable.Drawable$ConstantState.newDrawable(android.content.res.Resources)&#x27;</code>
on a <code>null</code> object reference</p></blockquote></li><li><p><strong>Firebase Realtime Database large <code>setTimeout</code> and <code>AlarmManager</code></strong>. Firebase APIs for JavaScript, especially the Realtime Database listeners,
will always run live in the foreground. However, React Native complains the following message every so often, when the listeners refresh their
timeout periods. <a href="https://github.com/facebook/react-native/issues/12981" target="_blank" rel="noopener noreferrer">This has been a known issue with React Native</a> and can only be solved
from React Native&#x27;s end. One alternative is to suppress the warning, but I despise it.  </p><blockquote><p>Setting a timer for a long period of time, i.e. multiple minutes, is a performance and correctness issue on Android as it keeps the
timer module awake, and timers can only be called when the app is in the foreground. See <a href="https://github.com/facebook/react-native/issues/12981" target="_blank" rel="noopener noreferrer">https://github.com/facebook/react-native/issues/12981</a>
for more info. (Saw <code>setTimeout</code> with duration 224059ms).</p></blockquote></li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/bloodwork-nus/bloodconnect-docs/edit/master/docs/milestone2.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/bloodconnect/docs/milestone1"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Milestone 1 🚀</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/bloodconnect/docs/milestone3"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Milestone 3 🧪 »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#whats-new" class="table-of-contents__link">What&#39;s new?</a><ul><li><a href="#authorisation-" class="table-of-contents__link">Authorisation 🔑</a></li><li><a href="#maps-️" class="table-of-contents__link">Maps 🗺️</a></li><li><a href="#requests-and-donations-🩸" class="table-of-contents__link">Requests and donations 🩸</a></li><li><a href="#push-notifications-" class="table-of-contents__link">Push notifications 🔔</a></li><li><a href="#general-improvements-" class="table-of-contents__link">General improvements 📈</a></li></ul></li><li><a href="#testing" class="table-of-contents__link">Testing</a><ul><li><a href="#authorisation" class="table-of-contents__link">Authorisation</a></li><li><a href="#maps" class="table-of-contents__link">Maps</a></li><li><a href="#new-request-screen" class="table-of-contents__link">New request screen</a></li><li><a href="#manage-requests-screen" class="table-of-contents__link">Manage requests screen</a></li><li><a href="#ui-components" class="table-of-contents__link">UI components</a></li><li><a href="#known-issues" class="table-of-contents__link">Known issues</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/bloodconnect/docs/">Style Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/bloodconnect/docs/doc2/">Second Doc</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/bloodconnect/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/bloodwork-nus/bloodconnect" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div><p>BloodConnect is a project by Bloodwork for NUS Orbital 2020.</p></div></div></div></footer></div>
<script src="/bloodconnect/styles.6448a0d5.js"></script>
<script src="/bloodconnect/runtime~main.5ea7f81b.js"></script>
<script src="/bloodconnect/main.304eb369.js"></script>
<script src="/bloodconnect/1.0183cd1f.js"></script>
<script src="/bloodconnect/2.805cd87e.js"></script>
<script src="/bloodconnect/3.70b94179.js"></script>
<script src="/bloodconnect/1be78505.7d2ec039.js"></script>
<script src="/bloodconnect/37.6fd65a40.js"></script>
<script src="/bloodconnect/ce2a1ceb.ddcea579.js"></script>
<script src="/bloodconnect/08301e33.502c9a6e.js"></script>
</body>
</html>